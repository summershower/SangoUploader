"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[77],{46896:function(S,f,t){t.r(f),t.d(f,{default:function(){return u}});var i="data:image/png;base64,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",E=t(46126),C=t(67880),c=t.n(C),p=t(61430),d=t(93236),I=t(31026),x=t.n(I),n=t(62086),r=t(2236);c().extend(r).locale(x());function u(s){var e=s.url,o=s.state,a=s.file,A=s.time,l=s.size,g=s.id,_=s.setFilesList,v=s.isCDNAddress,m=(0,d.useRef)(null);(0,d.useEffect)(function(){var b=new IntersectionObserver(function(h){if(h[0].isIntersecting){var k;(k=m.current)===null||k===void 0||k.classList.add("flipAnimation"),b.disconnect()}});b.observe(m.current)},[m.current]);function D(b){b.stopPropagation(),_(function(h){return h.filter(function(k){return k.id!==g})}),(0,p.Oy)(g)}return o==="PENDING"?(0,n.jsxs)("div",{className:"file-item flex p-3 mt-6 bg-gray-200 rounded-xl hover:bg-gray-300 transition-all cursor-pointer",ref:m,children:[(0,n.jsx)("img",{className:"rounded-xl w-24 h-24 object-cover filter blur-sm  ",src:/png|jpg|jpeg|png|webp|bmp|svg/i.test(e??"")?URL.createObjectURL(a):i}),(0,n.jsx)("div",{className:"flex-1 flex items-center ml-4 break-all",children:"\u4E0A\u4F20\u4E2D..."})]}):o==="SUCCESS"?(0,n.jsxs)("div",{className:"file-item  relative flex p-3 mt-6 bg-gray-200 rounded-xl hover:bg-gray-300 transition-all cursor-pointer",onClick:function(){var h;return(0,E.r0)((h=v?e:e==null?void 0:e.replace("https://cdn.meiqijiacheng.com/","https://sango-frankfurt.oss-accelerate.aliyuncs.com/"))!==null&&h!==void 0?h:"")},ref:m,children:[(0,n.jsx)("img",{className:"rounded-xl w-24 h-24 object-cover",src:/png|jpg|jpeg|png|webp|bmp|svg/i.test(e||"")?e:i}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col justify-center items-start h-24 ml-4 ",children:[(0,n.jsx)("div",{children:v?e:e==null?void 0:e.replace("https://cdn.meiqijiacheng.com/","https://sango-frankfurt.oss-accelerate.aliyuncs.com/")}),(0,n.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["\u6587\u4EF6\u5927\u5C0F: ",l/1024>1024?(l/1024/1024).toFixed(2)+"Mb":(l/1024).toFixed(2)+"kb","\xA0\xA0\xA0\u4E0A\u4F20\u65F6\u95F4\uFF1A",c()(A).format("YYYY-MM-DD HH:mm:ss")," (",c()(A).fromNow(),")"]})]}),(0,n.jsx)("div",{className:"closeBtn hidden absolute right-3 top-3 text-sm rounded-full bg-gray-400 transition-all w-5 h-5 text-white flex justify-center items-center hover:bg-red-400",onClick:D,children:"X"})]}):(0,n.jsxs)("div",{className:"file-item flex p-3 mt-6 bg-red-100 rounded-xl hover:bg-gray-300 transition-all cursor-pointer",ref:m,children:[(0,n.jsx)("img",{className:"rounded-xl w-24 h-24 object-cover filter blur-sm ",src:/png|jpg|jpeg|png|webp|bmp|svg/i.test(e??"")?URL.createObjectURL(a):i}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col justify-center items-start h-24 ml-4 ",children:[(0,n.jsxs)("div",{children:[(a==null?void 0:a.name)||""," "]}),(0,n.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["\u6587\u4EF6\u5927\u5C0F: ",l/1024>1024?(l/1024/1024).toFixed(2)+"Mb":(l/1024).toFixed(2)+"kb","\xA0\xA0\xA0\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u8BD5"]})]})]})}},61430:function(S,f,t){t.d(f,{B7:function(){return d},Oy:function(){return x},XZ:function(){return p},vO:function(){return I}});var i="uploadRecords",E="SangoUploader",C=2,c=null;function p(){return new Promise(function(n,r){var u=window.indexedDB.open(E,C);u.onupgradeneeded=function(s){var e;if(c=s==null||(e=s.target)===null||e===void 0?void 0:e.result,!c.objectStoreNames.contains(i))var o=c.createObjectStore(i,{keyPath:"id"})},u.onsuccess=function(s){var e;c=s==null||(e=s.target)===null||e===void 0?void 0:e.result,n(!0)},u.onerror=function(s){r(s)}})}function d(n){delete n.file;var r=c.transaction(i,"readwrite").objectStore(i).add(n);r.onsuccess=function(){console.log("\u5199\u5165",r.result)},r.onerror=function(u){console.log(u,"\u5199\u5165\u5931\u8D25")}}function I(){return new Promise(function(n,r){var u=c.transaction(i).objectStore(i),s=u.getAll();s.onsuccess=function(e){n(e.target.result)}})}function x(n){var r=c.transaction(i,"readwrite").objectStore(i).delete(n);r.onsuccess=function(){console.log("\u5220\u9664\u6210\u529F",r.result)},r.onerror=function(u){console.log(u,"\u5220\u9664\u5931\u8D25")}}},46126:function(S,f,t){t.d(f,{Kk:function(){return s},oP:function(){return r},r0:function(){return u}});var i=t(9189),E=t.n(i),C=t(58482),c=t.n(C),p=t(93275),d=t.n(p),I=t(34847),x=t.n(I),n=t(29485);function r(e){return new Promise(function(o,a){var A=new FileReader;A.readAsArrayBuffer(e),A.onload=function(l){var g,_=l.target.result,v=new(x()).ArrayBuffer().append(_).end(),m=(g=/\.([a-zA-Z0-9]+)$/.exec(e.name))===null||g===void 0?void 0:g[1];o(e.name.replace("."+m,"")+"-"+v.substr(-9)+"."+m)},A.onerror=function(l){a(l)}})}function u(e){var o=document.createElement("input");o.value=e,document.body.appendChild(o),o.select(),document.execCommand("Copy"),document.body.removeChild(o),n.ZP.success("\u590D\u5236URL\u6210\u529F")}var s=function(){function e(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5,A=arguments.length>2?arguments[2]:void 0;E()(this,e),d()(this,"maxConcurrencyLimit",5),d()(this,"tasks",[]),d()(this,"processingTasks",[]),d()(this,"failedTasks",[]),d()(this,"state","PENDING"),d()(this,"processCallback",void 0),d()(this,"total",0),this.maxConcurrencyLimit=a,this.tasks=o,this.total=o.length,this.processCallback=A,this.handleCallback()}return c()(e,[{key:"start",value:function(){for(this.state="PROCESSING";this.processingTasks.length<this.maxConcurrencyLimit&&this.tasks.length;)this.handleOneTask();var a=Promise.race(this.processingTasks);this.handleRace(a)}},{key:"handleRace",value:function(a){var A=this,l=function(){A.tasks.length&&A.processingTasks.length<A.maxConcurrencyLimit&&(A.handleOneTask(),A.handleRace(Promise.race(A.processingTasks)))};a.then(l,l)}},{key:"handleOneTask",value:function(){var a=this,A=this.tasks.shift(),l=A();l.then(function(){a.processingTasks.splice(a.processingTasks.findIndex(function(g){return g===l}),1),a.checkFinallyState()},function(g){console.log(g);var _=a.processingTasks.findIndex(function(v){return v===l});a.processingTasks.splice(_,1),a.failedTasks.push(A),a.checkFinallyState()}),this.processingTasks.push(l)}},{key:"checkFinallyState",value:function(){!this.tasks.length&&!this.processingTasks.length?(this.failedTasks.length?this.state="FAILED":this.state="SUCCESS",this.handleCallback()):this.handleCallback()}},{key:"handleCallback",value:function(){this.processCallback&&this.processCallback(this.state,this.processingTasks.length,this.tasks.length,this.failedTasks.length,this.total)}}]),e}()}}]);
