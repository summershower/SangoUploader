"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[464],{6069:function(T,v,n){n.r(v),n.d(v,{default:function(){return s}});var a=n(94434),y=n.n(a),m=n(46686),c=n.n(m),g=n(93236),h=n(61430),b=n(23876),d=n(62086),l=function(e){var t=e.filesList,p=e.activeDirectory,x=e.setActiveDirectory,j=e.setPage,D=e.setUploadDirectory,A=e.setFilesList,B=(0,g.useState)({}),L=c()(B,2),w=L[0],F=L[1];(0,g.useEffect)(function(){for(var r={},o=0;o<t.length;o++)r[t[o].directory]?(r[t[o].directory].count++,r[t[o].directory].lastModified<t[o].time&&(r[t[o].directory].lastModified=t[o].time)):r[t[o].directory]={count:1,lastModified:t[o].time,directory:t[o].directory},F(r)},[t.length]);function P(r,o){o.stopPropagation();for(var i=y()(t),C=function(S){if(t[S].directory===r){(0,h.Oy)(t[S].id);var M=i.findIndex(function(O){return O.id===t[S].id});i.splice(M,1)}},f=0;f<t.length;f++)C(f);A(i),x(""),j(1)}return t.length?(0,d.jsxs)("div",{className:"flex flex-wrap",children:[(0,d.jsxs)("div",{onClick:function(){x(""),j(1),D("test")},className:"mr-5 bg-gray-40 pt-4 pb-4 pl-8 pr-8 shadow-sm bg-gray-50 text-gray-800 cursor-pointer rounded-xl mt-5 transition-all hover:bg-blue-100 ".concat(p===""&&"bg-blue-100"),children:["\u5168\u90E8(",t.length,")"]}),Object.entries(w).sort(function(r,o){return o[1].lastModified-r[1].lastModified}).map(function(r){var o=c()(r,2),i=o[0],C=o[1];return(0,d.jsxs)("div",{className:"tag-item relative mr-5 bg-gray-40 pt-4 pb-4 pl-8 pr-8 shadow-sm bg-gray-50 text-gray-800 cursor-pointer rounded-xl mt-5 transition-all hover:bg-blue-100 ".concat(p===i&&"bg-blue-100"),onClick:function(){x(i),j(1),D(i)},children:[i,"(",C.count,")",(0,d.jsx)(b.Z,{title:"\u5220\u9664".concat(i,"\u7684\u8BB0\u5F55\u5417\uFF1F"),onConfirm:function(N){return P(i,N)},okText:"Yes",cancelText:"No",children:(0,d.jsx)("div",{className:"tagCloseBtn absolute text-xs rounded-full bg-gray-300 transition-all w-5 h-5 text-white flex justify-center items-center hover:bg-red-400 hover:w-6 hover:h-6",children:"X"})})]},i)})]}):(0,d.jsx)("div",{})},s=l},61430:function(T,v,n){n.d(v,{B7:function(){return h},Oy:function(){return d},XZ:function(){return g},vO:function(){return b}});var a="uploadRecords",y="SangoUploader",m=1,c=null;function g(){return new Promise(function(l,s){var u=window.indexedDB.open(y,m);u.onupgradeneeded=function(e){var t;if(c=e==null||(t=e.target)===null||t===void 0?void 0:t.result,!c.objectStoreNames.contains(a))var p=c.createObjectStore(a,{keyPath:"id"})},u.onsuccess=function(e){var t;c=e==null||(t=e.target)===null||t===void 0?void 0:t.result,l(!0)},u.onerror=function(e){s(e)}})}function h(l){delete l.file;var s=c.transaction(a,"readwrite").objectStore(a).add(l);s.onsuccess=function(){console.log("\u5199\u5165",s.result)},s.onerror=function(u){console.log(u,"\u5199\u5165\u5931\u8D25")}}function b(){return new Promise(function(l,s){var u=c.transaction(a).objectStore(a),e=u.getAll();e.onsuccess=function(t){l(t.target.result)}})}function d(l){var s=c.transaction(a,"readwrite").objectStore(a).delete(l);s.onsuccess=function(){console.log("\u5220\u9664\u6210\u529F",s.result)},s.onerror=function(u){console.log(u,"\u5220\u9664\u5931\u8D25")}}}}]);
